<!doctype html>
<html>
  <body>
    <h1>ESP32 via ngrok</h1>
    <textarea id="log" cols="60" rows="10" readonly></textarea><br>
    <input id="m" placeholder="message"/><button id="s">Send</button>

    <script>
      // replace abcd1234.ngrok-free.app with your ngrok HTTPS host
      //const ws = new WebSocket('wss://abcd1234.ngrok-free.app/ws');
      const ws = new WebSocket('wss://898d84e50fad.ngrok-free.app/ws');
	  
      const log = document.getElementById('log');
      function append(t){ log.value += t + '\n'; log.scrollTop = log.scrollHeight; }

      ws.onopen = () => append('Connected (via ngrok)');
      ws.onmessage = ev => append('Recv: ' + ev.data);
      ws.onclose = () => append('Closed');
      ws.onerror = e => append('Error: ' + e);

      document.getElementById('s').onclick = () => {
        const m = document.getElementById('m').value;
        ws.send(m);
        append('Sent: ' + m);
      };
    </script>
  </body>
</html>
